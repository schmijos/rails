<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Class: ActiveRecord::Errors</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
	<script type="text/javascript">
	// <![CDATA[

	function popupCode( url ) {
		window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
	}

	function toggleCode( id ) {
		if ( document.getElementById )
			elem = document.getElementById( id );
		else if ( document.all )
			elem = eval( "document.all." + id );
		else
			return false;

		elemStyle = elem.style;
		
		if ( elemStyle.display != "block" ) {
			elemStyle.display = "block"
		} else {
			elemStyle.display = "none"
		}

		return true;
	}
	
	// Make codeblocks hidden by default
	document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
	
	// ]]>
	</script>

</head>
<body>



    <div id="classHeader">
        <h1>ActiveRecord::Errors <sup class="type-note">(Class)</sup></h1>
        <table class="header-table">
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/vendor/activerecord/lib/active_record/validations_rb.html">
                vendor/activerecord/lib/active_record/validations.rb
                </a>
				<br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

	<div id="bodyContent">


	<div id="contextContent">

		<div id="description">
			<p>
Active Record validation is reported to and from this object, which is used
by <a href="Base.html#M000149">Base#save</a> to determine whether the
object in a valid state to be saved. See usage example in <a
href="Validations.html">Validations</a>.
</p>

		</div>


		<div id="method-list">
			<h2 class="section-bar">Methods</h2>

			<div class="name-list">
			<a href="#M000111">add</a>&nbsp;&nbsp;
			<a href="#M000112">add_on_empty</a>&nbsp;&nbsp;
			<a href="#M000110">add_to_base</a>&nbsp;&nbsp;
			<a href="#M000119">clear</a>&nbsp;&nbsp;
			<a href="#M000120">count</a>&nbsp;&nbsp;
			<a href="#M000116">each</a>&nbsp;&nbsp;
			<a href="#M000117">each_full</a>&nbsp;&nbsp;
			<a href="#M000118">empty?</a>&nbsp;&nbsp;
			<a href="#M000113">invalid?</a>&nbsp;&nbsp;
			<a href="#M000114">on</a>&nbsp;&nbsp;
			<a href="#M000115">on_base</a>&nbsp;&nbsp;
			</div>
		</div>




			

	</div>



		<!-- if includes -->


		<!-- if method_list -->
		<div id="methods">
			<h2 class="section-bar">Public Instance methods</h2>

			<!-- add_to_base(msg) -->
			<div id="method-M000110" class="method-detail">
				<a name="M000110"></a>

				<div class="method-heading">
					<a href="#M000110" class="method-signature">
					<span class="method-name">add_to_base</span><span class="method-args">(msg)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Adds an error to the base object instead of any particular attribute. This
is used to report errors that doesn&#8217;t tie to any specific attribute,
but rather to the object as a whole. These error messages doesn&#8217;t get
prepended with any field name when iterating with <a
href="Errors.html#M000117">each_full</a>, so they should be complete
sentences.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000110-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000110-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 105</span>
105:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_to_base</span>(<span class="ruby-identifier">msg</span>)
106:       <span class="ruby-identifier">add</span>(<span class="ruby-identifier">:base</span>, <span class="ruby-identifier">msg</span>)
107:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- add(attribute, msg = true) -->
			<div id="method-M000111" class="method-detail">
				<a name="M000111"></a>

				<div class="method-heading">
					<a href="#M000111" class="method-signature">
					<span class="method-name">add</span><span class="method-args">(attribute, msg = true)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Adds an error message (<tt>msg</tt>) to the <tt>attribute</tt>, which will
be returned on a call to <tt>on(attribute)</tt> for the same attribute and
ensure that this error object returns false when asked if +empty?+. More
than one error can be added to the same <tt>attribute</tt> in which case an
array will be returned on a call to <tt>on(attribute)</tt>. If no
<tt>msg</tt> is supplied, <tt>true</tt> is assumed.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000111-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000111-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 113</span>
113:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-keyword kw">true</span>)
114:       <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>] = [] <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">nil?</span>
115:       <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">msg</span>
116:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- add_on_empty(attributes, msg = &quot;can't be empty&quot;) -->
			<div id="method-M000112" class="method-detail">
				<a name="M000112"></a>

				<div class="method-heading">
					<a href="#M000112" class="method-signature">
					<span class="method-name">add_on_empty</span><span class="method-args">(attributes, msg = &quot;can't be empty&quot;)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is empty (defined by <tt>attribute_present?</tt>).
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000112-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000112-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 119</span>
119:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_on_empty</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-value str">&quot;can't be empty&quot;</span>)
120:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)
121:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">msg</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attr</span>) }
122:       <span class="ruby-keyword kw">else</span>
123:         <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">msg</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attributes</span>)
124:       <span class="ruby-keyword kw">end</span>
125:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- invalid?(attribute) -->
			<div id="method-M000113" class="method-detail">
				<a name="M000113"></a>

				<div class="method-heading">
					<a href="#M000113" class="method-signature">
					<span class="method-name">invalid?</span><span class="method-args">(attribute)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns true if the specified <tt>attribute</tt> has errors associated with
it.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000113-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000113-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 128</span>
128:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">invalid?</span>(<span class="ruby-identifier">attribute</span>)
129:       <span class="ruby-operator">!</span><span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">nil?</span>
130:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- on(attribute) -->
			<div id="method-M000114" class="method-detail">
				<a name="M000114"></a>

				<div class="method-heading">
					<a href="#M000114" class="method-signature">
					<span class="method-name">on</span><span class="method-args">(attribute)</span>
					</a>
				</div>
			
				<div class="method-description">
					<ul>
<li>Returns nil, if no errors are associated with the specified
<tt>attribute</tt>.

</li>
<li>Returns the error message, if one error is associated with the specified
<tt>attribute</tt>.

</li>
<li>Returns an array of error messages, if more than one error is associated
with the specified <tt>attribute</tt>.

</li>
</ul>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000114-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000114-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 135</span>
135:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on</span>(<span class="ruby-identifier">attribute</span>)
136:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">nil?</span>
137:         <span class="ruby-keyword kw">nil</span>
138:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
139:         <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">first</span>
140:       <span class="ruby-keyword kw">else</span>
141:         <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attribute</span>]
142:       <span class="ruby-keyword kw">end</span>
143:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- on_base() -->
			<div id="method-M000115" class="method-detail">
				<a name="M000115"></a>

				<div class="method-heading">
					<a href="#M000115" class="method-signature">
					<span class="method-name">on_base</span><span class="method-args">()</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns errors assigned to base object through <a
href="Errors.html#M000110">add_to_base</a> according to the normal rules of
on(attribute).
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000115-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 146</span>
146:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_base</span>
147:       <span class="ruby-identifier">on</span>(<span class="ruby-identifier">:base</span>)
148:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- each() {|attr, msg } }| ...} -->
			<div id="method-M000116" class="method-detail">
				<a name="M000116"></a>

				<div class="method-heading">
					<a href="#M000116" class="method-signature">
					<span class="method-name">each</span><span class="method-args">() {|attr, msg } }| ...}</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Yields each attribute and associated message per error added.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000116-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000116-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 151</span>
151:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span>
152:       <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">each_key</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attr</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">attr</span>, <span class="ruby-identifier">msg</span> } }
153:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- each_full() {|msg| ...} -->
			<div id="method-M000117" class="method-detail">
				<a name="M000117"></a>

				<div class="method-heading">
					<a href="#M000117" class="method-signature">
					<span class="method-name">each_full</span><span class="method-args">() {|msg| ...}</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Yields each full error message added. So
Person.errors.add(&quot;first_name&quot;, &quot;can&#8217;t be empty&quot;)
will be returned through iteration as &quot;First name can&#8217;t be
empty&quot;.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000117-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_full</span>
158:       <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">each_key</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> 
159:         <span class="ruby-ivar">@errors</span>[<span class="ruby-identifier">attr</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
160:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attr</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:base</span>
161:             <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">msg</span>
162:           <span class="ruby-keyword kw">else</span>
163:             <span class="ruby-keyword kw">yield</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attr</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">msg</span>
164:           <span class="ruby-keyword kw">end</span>
165:         <span class="ruby-keyword kw">end</span>
166:       <span class="ruby-keyword kw">end</span>
167:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- empty?() -->
			<div id="method-M000118" class="method-detail">
				<a name="M000118"></a>

				<div class="method-heading">
					<a href="#M000118" class="method-signature">
					<span class="method-name">empty?</span><span class="method-args">()</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns true if no errors have been added.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000118-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 170</span>
170:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">empty?</span>
171:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">empty?</span>
172:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- clear() -->
			<div id="method-M000119" class="method-detail">
				<a name="M000119"></a>

				<div class="method-heading">
					<a href="#M000119" class="method-signature">
					<span class="method-name">clear</span><span class="method-args">()</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Removes all the errors that have been added.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000119-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 175</span>
175:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear</span>
176:       <span class="ruby-ivar">@errors</span> = {}
177:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- count() -->
			<div id="method-M000120" class="method-detail">
				<a name="M000120"></a>

				<div class="method-heading">
					<a href="#M000120" class="method-signature">
					<span class="method-name">count</span><span class="method-args">()</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns the total number of errors added. Two errors added to the same
attribute will be counted as such with this as well.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000120-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/activerecord/lib/active_record/validations.rb, line 181</span>
181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count</span>
182:       <span class="ruby-identifier">error_count</span> = <span class="ruby-value">0</span>
183:       <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">each_value</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span> <span class="ruby-identifier">error_count</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">length</span> }
184:       <span class="ruby-identifier">error_count</span>
185:     <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>


		</div>


	</div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>