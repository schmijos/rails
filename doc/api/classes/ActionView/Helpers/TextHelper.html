<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Module: ActionView::Helpers::TextHelper</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
	<script type="text/javascript">
	// <![CDATA[

	function popupCode( url ) {
		window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
	}

	function toggleCode( id ) {
		if ( document.getElementById )
			elem = document.getElementById( id );
		else if ( document.all )
			elem = eval( "document.all." + id );
		else
			return false;

		elemStyle = elem.style;
		
		if ( elemStyle.display != "block" ) {
			elemStyle.display = "block"
		} else {
			elemStyle.display = "none"
		}

		return true;
	}
	
	// Make codeblocks hidden by default
	document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
	
	// ]]>
	</script>

</head>
<body>



    <div id="classHeader">
        <h1>ActionView::Helpers::TextHelper <sup class="type-note">(Module)</sup></h1>
        <table class="header-table">
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/vendor/actionpack/lib/action_view/helpers/text_helper_rb.html">
                vendor/actionpack/lib/action_view/helpers/text_helper.rb
                </a>
				<br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

	<div id="bodyContent">


	<div id="contextContent">

		<div id="description">
			<p>
Provides a set of methods for working with text strings that can help
unburden the level of inline Ruby code in the templates. In the example
below we iterate over a collection of posts provided to the template and
prints each title after making sure it doesn&#8217;t run longer than 20
characters:
</p>
<pre>
  &lt;% for post in @posts %&gt;
    Title: &lt;%= truncate(post.title, 20) %&gt;
  &lt;% end %&gt;
</pre>

		</div>


		<div id="method-list">
			<h2 class="section-bar">Methods</h2>

			<div class="name-list">
			<a href="#M000057">excerpt</a>&nbsp;&nbsp;
			<a href="#M000056">highlight</a>&nbsp;&nbsp;
			<a href="#M000060">strip_links</a>&nbsp;&nbsp;
			<a href="#M000058">textilize</a>&nbsp;&nbsp;
			<a href="#M000059">textilize_without_paragraph</a>&nbsp;&nbsp;
			<a href="#M000055">truncate</a>&nbsp;&nbsp;
			</div>
		</div>




			

	</div>



		<!-- if includes -->


		<!-- if method_list -->
		<div id="methods">
			<h2 class="section-bar">Public Instance methods</h2>

			<!-- truncate(text, length = 30, truncate_string = &quot;...&quot;) -->
			<div id="method-M000055" class="method-detail">
				<a name="M000055"></a>

				<div class="method-heading">
					<a href="#M000055" class="method-signature">
					<span class="method-name">truncate</span><span class="method-args">(text, length = 30, truncate_string = &quot;...&quot;)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Truncates <tt>text</tt> to the length of <tt>length</tt> and replaces the
last three characters with the <tt>truncate_string</tt> if the
<tt>text</tt> is longer than <tt>length</tt>.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000055-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000055-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 42</span>
42:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">length</span> = <span class="ruby-value">30</span>, <span class="ruby-identifier">truncate_string</span> = <span class="ruby-value str">&quot;...&quot;</span>)
43:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">end</span>
44:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">length</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">text</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span>(<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>)] <span class="ruby-operator">+</span> <span class="ruby-identifier">truncate_string</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword kw">end</span>
45:       <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- highlight(text, phrase, highlighter = '&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;') -->
			<div id="method-M000056" class="method-detail">
				<a name="M000056"></a>

				<div class="method-heading">
					<a href="#M000056" class="method-signature">
					<span class="method-name">highlight</span><span class="method-args">(text, phrase, highlighter = '&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;')</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Highlights the <tt>phrase</tt> where it is found in the <tt>text</tt> by
surrounding it like &lt;strong class=&quot;highlight&quot;&gt;I&#8217;m a
highlight phrase&lt;/strong&gt;. The highlighter can be specialized by
passing <tt>highlighter</tt> as single-quoted string with \1 where the
phrase is supposed to be inserted. N.B.: The <tt>phrase</tt> is sanitized
to include only letters, digits, and spaces before use.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000056-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000056-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 51</span>
51:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">highlight</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">highlighter</span> = <span class="ruby-value str">'&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;'</span>)
52:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">phrase</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">end</span>
53:         <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/(#{escape_regexp(phrase)})/i</span>, <span class="ruby-identifier">highlighter</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span>
54:       <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- excerpt(text, phrase, radius = 100, excerpt_string = &quot;...&quot;) -->
			<div id="method-M000057" class="method-detail">
				<a name="M000057"></a>

				<div class="method-heading">
					<a href="#M000057" class="method-signature">
					<span class="method-name">excerpt</span><span class="method-args">(text, phrase, radius = 100, excerpt_string = &quot;...&quot;)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Extracts an excerpt from the <tt>text</tt> surrounding the <tt>phrase</tt>
with a number of characters on each side determined by <tt>radius</tt>. If
the phrase isn&#8217;t found, nil is returned. Ex:
</p>
<pre>
  excerpt(&quot;hello my world&quot;, &quot;my&quot;, 3) =&gt; &quot;...lo my wo...&quot;
</pre>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000057-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000057-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 59</span>
59:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">excerpt</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">radius</span> = <span class="ruby-value">100</span>, <span class="ruby-identifier">excerpt_string</span> = <span class="ruby-value str">&quot;...&quot;</span>)
60:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">phrase</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-identifier">phrase</span> = <span class="ruby-identifier">escape_regexp</span>(<span class="ruby-identifier">phrase</span>)
62:         
63:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">found_pos</span> = <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/(#{phrase})/i</span>
64:           <span class="ruby-identifier">start_pos</span> = [ <span class="ruby-identifier">found_pos</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">radius</span>, <span class="ruby-value">0</span> ].<span class="ruby-identifier">max</span>
65:           <span class="ruby-identifier">end_pos</span>   = [ <span class="ruby-identifier">found_pos</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">phrase</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">radius</span>, <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> ].<span class="ruby-identifier">min</span>
66: 
67:           <span class="ruby-identifier">prefix</span>  = <span class="ruby-identifier">start_pos</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">excerpt_string</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>
68:           <span class="ruby-identifier">postfix</span> = <span class="ruby-identifier">end_pos</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> <span class="ruby-value">? </span><span class="ruby-identifier">excerpt_string</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>
69: 
70:           <span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>[<span class="ruby-identifier">start_pos</span><span class="ruby-operator">..</span><span class="ruby-identifier">end_pos</span>].<span class="ruby-identifier">strip</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">postfix</span>
71:         <span class="ruby-keyword kw">else</span>
72:           <span class="ruby-keyword kw">nil</span>
73:         <span class="ruby-keyword kw">end</span>
74:       <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- textilize(text) -->
			<div id="method-M000058" class="method-detail">
				<a name="M000058"></a>

				<div class="method-heading">
					<a href="#M000058" class="method-signature">
					<span class="method-name">textilize</span><span class="method-args">(text)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns the text with all the Textile codes turned into HTML-tags. <em>This
method is only available if RedCloth can be required</em>.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000058-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000058-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 81</span>
81:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">textilize</span>(<span class="ruby-identifier">text</span>)
82:           <span class="ruby-constant">RedCloth</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">to_html</span>
83:         <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- textilize_without_paragraph(text) -->
			<div id="method-M000059" class="method-detail">
				<a name="M000059"></a>

				<div class="method-heading">
					<a href="#M000059" class="method-signature">
					<span class="method-name">textilize_without_paragraph</span><span class="method-args">(text)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Returns the text with all the Textile codes turned into HTML-tags, but
without the regular bounding &lt;p&gt; tag. <em>This method is only
available if RedCloth can be required</em>.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000059-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000059-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 87</span>
87:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">textilize_without_paragraph</span>(<span class="ruby-identifier">text</span>)
88:           <span class="ruby-identifier">textiled</span> = <span class="ruby-identifier">textilize</span>(<span class="ruby-identifier">text</span>)
89:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">textiled</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&lt;p&gt;&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">textiled</span> = <span class="ruby-identifier">textiled</span>[<span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-keyword kw">end</span>
90:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">textiled</span>[<span class="ruby-value">-4</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&lt;/p&gt;&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">textiled</span> = <span class="ruby-identifier">textiled</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-5</span>] <span class="ruby-keyword kw">end</span>
91:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">textiled</span>
92:         <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>

			<!-- strip_links(text) -->
			<div id="method-M000060" class="method-detail">
				<a name="M000060"></a>

				<div class="method-heading">
					<a href="#M000060" class="method-signature">
					<span class="method-name">strip_links</span><span class="method-args">(text)</span>
					</a>
				</div>
			
				<div class="method-description">
					<p>
Turns all links into words, like &quot;&lt;a
href=&quot;something&quot;&gt;else&lt;/a&gt;&quot; to &quot;else&quot;.
</p>
					<p><a class="source-toggle" href="#"
					  onclick="toggleCode('M000060-source');return false;">[Source]</a></p>
					<div class="method-source-code" id="M000060-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/actionpack/lib/action_view/helpers/text_helper.rb, line 98</span>
 98:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strip_links</span>(<span class="ruby-identifier">text</span>)
 99:         <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&lt;a.*&gt;(.*)&lt;\/a&gt;/</span>, <span class="ruby-value str">'\1'</span>)
100:       <span class="ruby-keyword kw">end</span>
</pre>
					</div>
				</div>
			</div>


		</div>


	</div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>