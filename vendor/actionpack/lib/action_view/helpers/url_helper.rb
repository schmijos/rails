module ActionView
  module Helpers
    # Provides a set of methods for making easy links and getting urls that depend on the controller and action. This means that
    # you can use the same format for links in the views that you do in the controller. The different methods are even named
    # synchronously, so link_to uses that same url as is generated by url_for, which again is the same url used for
    # redirection in redirect_to.
    module UrlHelper
      # Creates a link tag of the given +name+ using an URL created by the set of +options+. See the valid options in
      # link:classes/ActionController/Base.html#M000021
      def link_to(name, options = {}, html_options = {})
        "<a href='#{url_for(options)}'#{tag_options(html_options)}>#{name}</a>"
      end

      # Returns the URL for the set of +options+ provided. See the valid options in link:classes/ActionController/Base.html#M000021
      def url_for(options = {})
        @controller.send(:url_for, options)
      end
      
      private
        def tag_options(options_hash)
          " " + options_hash.collect { |pair| "#{pair.first}=\"#{pair.last}\"" }.sort.join(" ") unless options_hash.empty?
        end
    end
  end
end